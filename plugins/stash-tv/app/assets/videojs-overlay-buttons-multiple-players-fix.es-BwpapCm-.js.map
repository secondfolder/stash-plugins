{"version":3,"file":"videojs-overlay-buttons-multiple-players-fix.es-BwpapCm-.js","sources":["../../../../../node_modules/videojs-overlay-buttons/dist/videojs-overlay-buttons-multiple-players-fix.es.js"],"sourcesContent":["/*! @name videojs-overlay-buttons-multiple-players-fix @version 1.3.2 @license MIT */\nimport videojs from 'video.js';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar version = \"1.3.2\";\n\nvar latestTap;\nvar isLocked = false; // Default options for the plugin.\n\nvar defaults = {\n  seekLeft: {\n    handleClick: function handleClick(player) {\n      var time = Number(player.currentTime()) - 10;\n      player.currentTime(time);\n    },\n    doubleTap: true\n  },\n  play: {\n    handleClick: function handleClick(player) {\n      if (player.paused()) {\n        player.play();\n      } else {\n        player.pause();\n      }\n    }\n  },\n  seekRight: {\n    handleClick: function handleClick(player) {\n      var time = Number(player.currentTime()) + 10;\n      player.currentTime(time);\n    },\n    doubleTap: true\n  },\n  lockButton: false\n};\nvar controlButtons = {\n  previous: {\n    icon: 'backward',\n    className: 'previous-button'\n  },\n  seekLeft: {\n    icon: 'history',\n    className: 'seek-left'\n  },\n  play: {\n    icon: 'play',\n    className: 'play-button'\n  },\n  seekRight: {\n    icon: 'history',\n    className: 'seek-right',\n    extra: 'fa-flip-horizontal'\n  },\n  next: {\n    icon: 'forward',\n    className: 'next-button'\n  }\n}; // Cross-compatibility for Video.js 5 and 6.\n\nvar registerPlugin = videojs.registerPlugin || videojs.plugin; // const dom = videojs.dom || videojs;\n\n/**\n * Function to invoke when the player is ready.\n *\n * This is a great place for your plugin to initialize itself. When this\n * function is called, the player will have its DOM and child components\n * in place.\n *\n * @function onPlayerReady\n * @param    {Player} player\n *           A Video.js player object.\n *\n * @param    {Object} [options={}]\n *           A plain object containing options for the plugin.\n */\n\nvar onPlayerReady = function onPlayerReady(player, options) {\n  player.addClass('vjs-touch-overlay');\n  var overlay = createOverlay(player, options);\n  player.el().append(overlay);\n  eventsInitialize(player, overlay);\n};\n\nvar eventsInitialize = function eventsInitialize(player, overlay) {\n  var overlayRow = overlay.querySelector('.overlay-row');\n  player.on('play', function () {\n    var playButtonWrapper = overlayRow.querySelector('.play-button .button-wrapper');\n    playButtonWrapper.innerHTML = '<i class=\"icon fa fa-4x fa-pause\"></i>';\n  });\n  player.on('pause', function () {\n    var playButtonWrapper = overlayRow.querySelector('.play-button .button-wrapper');\n    playButtonWrapper.innerHTML = '<i class=\"icon fa fa-4x fa-play\"></i>';\n  });\n  player.on('userinactive', function () {\n    overlay.classList.add('d-none');\n    overlayRow.classList.add('d-none');\n  });\n  player.on('useractive', function () {\n    overlay.classList.remove('d-none');\n    overlayRow.classList.remove('d-none');\n  });\n  overlay.addEventListener('click', function (e) {\n    var playerElm = player.el();\n    if (!playerElm) return;\n    var controlBar = playerElm.querySelector('.vjs-control-bar'); // If clicked element is overlay button, then ignore this\n\n    if (e.target.classList.contains('icon')) {\n      return;\n    }\n\n    if (!overlayRow.classList.contains('d-none')) {\n      overlayRow.classList.add('d-none');\n      controlBar.classList.add('d-none');\n    } else {\n      overlayRow.classList.remove('d-none');\n\n      if (!isLocked) {\n        controlBar.classList.remove('d-none');\n      }\n    }\n  });\n};\n\nvar createOverlay = function createOverlay(player, options) {\n  if (!options || !Object.keys(options).length) {\n    options = _extends({}, defaults);\n  } else {\n    options = mergeOptions(options, defaults);\n  }\n\n  var overlay_div = document.createElement('div');\n  var row = document.createElement('div');\n  var controlOverlay = document.createElement('div');\n  controlOverlay.className = 'overlay-col-12 mx-auto control-overlay-buttons';\n  row.className = 'overlay-row';\n  overlay_div.className = 'overlay-container-fluid vjs-overlay'; // Filter out button options\n\n  var btnOpts = Object.keys(options).filter(function (button) {\n    return controlButtons.hasOwnProperty(button);\n  });\n  var buttons = btnOpts.map(function (button) {\n    var buttonProperties = controlButtons[button];\n    var element = createButton(buttonProperties);\n    return {\n      options: options[button],\n      element: element\n    };\n  });\n  handleClick(buttons, player);\n  handleTap(buttons, player);\n\n  if (options.lockButton) {\n    var lockOverlay = document.createElement('div');\n    lockOverlay.className = 'overlay-col-1 lock-overlay';\n    controlOverlay.classList.remove('overlay-col-12', 'mx-auto');\n    controlOverlay.classList.add('overlay-col-11');\n    var lockButtonProperties = {\n      icon: 'lock',\n      className: 'lock-button',\n      size: '2x'\n    };\n    var lockButton = createButton(lockButtonProperties);\n    handleLockClick(lockButton, player);\n    lockOverlay.append(lockButton);\n    row.append(lockOverlay);\n  }\n\n  buttons.forEach(function (button) {\n    return controlOverlay.append(button.element);\n  });\n  row.append(controlOverlay);\n  overlay_div.append(row);\n  return overlay_div;\n};\n\nvar handleLockClick = function handleLockClick(lockBtn, player) {\n  var _lockBtn$children = lockBtn.children,\n      wrapperElement = _lockBtn$children[0];\n  wrapperElement.addEventListener('click', function () {\n    var playerElm = player.el();\n    if (!playerElm) return;\n    var controlBar = playerElm.querySelector('.vjs-control-bar');\n    var controlButtonsWrapper = Array.from(playerElm.querySelectorAll('.overlay-button:not(.lock-button)'));\n\n    if (isLocked) {\n      wrapperElement.innerHTML = '<i class=\"icon fa fa-2x fa-lock\"></i>';\n      controlButtonsWrapper.forEach(function (btn) {\n        btn.classList.remove('d-none');\n      });\n      controlBar.classList.remove('d-none');\n      isLocked = false;\n      return;\n    }\n\n    wrapperElement.innerHTML = '<i class=\"icon fa fa-2x fa-unlock\"></i>';\n    controlButtonsWrapper.forEach(function (btn) {\n      btn.classList.add('d-none');\n    });\n    controlBar.classList.add('d-none');\n    isLocked = true;\n  });\n};\n\nvar handleTap = function handleTap(buttons, player) {\n  buttons = buttons.filter(function (button) {\n    return button.options.doubleTap && button.options.handleClick;\n  });\n  buttons.forEach(function (button) {\n    button.element.addEventListener('click', function () {\n      isDoubleTap(function () {\n        button.options.handleClick(player);\n      });\n    });\n  });\n};\n\nvar handleClick = function handleClick(buttons, player) {\n  buttons = buttons.filter(function (btn) {\n    return btn.options.handleClick;\n  });\n  buttons.forEach(function (button) {\n    var _button$element$child = button.element.children,\n        wrapperElement = _button$element$child[0];\n    wrapperElement.addEventListener('click', function () {\n      return button.options.handleClick(player);\n    });\n  });\n};\n\nvar createButton = function createButton(_ref) {\n  var icon = _ref.icon,\n      _ref$extra = _ref.extra,\n      extra = _ref$extra === void 0 ? '' : _ref$extra,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? '4x' : _ref$size;\n  var iconEl = document.createElement('i');\n  iconEl.className = \"icon fa fa-\" + size + \" fa-\" + icon + \" \" + extra;\n  var wrapper = document.createElement('div');\n  wrapper.className = 'button-wrapper';\n  wrapper.append(iconEl);\n  var button = document.createElement('div');\n  button.className = \"overlay-button vjs-button \" + className;\n  button.append(wrapper);\n  return button;\n};\n\nvar isDoubleTap = function isDoubleTap(callback) {\n  var now = new Date().getTime();\n  var timeSince = now - latestTap;\n\n  if (timeSince < 400 && timeSince > 0) {\n    callback();\n  }\n\n  latestTap = new Date().getTime();\n};\n\nvar mergeOptions = function mergeOptions(originalOpts, defaultOpts) {\n  for (var key in originalOpts) {\n    var userOption = originalOpts[key];\n    var defaultOption = defaultOpts[key];\n\n    if (!defaultOption) {\n      continue;\n    }\n\n    for (var option in defaultOption) {\n      if (!userOption.hasOwnProperty(option) && defaultOption.hasOwnProperty(option)) {\n        userOption[option] = defaultOption[option];\n      }\n    }\n  }\n\n  return originalOpts;\n};\n/**\n * A video.js plugin.\n *\n * In the plugin function, the value of `this` is a video.js `Player`\n * instance. You cannot rely on the player being in a \"ready\" state here,\n * depending on how the plugin is invoked. This may or may not be important\n * to you; if not, remove the wait for \"ready\"!\n *\n * @function touchOverlay\n * @param    {Object} [options={}]\n *           An object of options left to the plugin author to define.\n */\n\n\nvar touchOverlay = function touchOverlay(options) {\n  var _this = this;\n\n  // videojs.mergeOptions(defaults, options)\n  this.ready(function () {\n    onPlayerReady(_this, options);\n  });\n}; // Register the plugin with video.js.\n\n\nregisterPlugin('touchOverlay', touchOverlay); // Include the version number.\n\ntouchOverlay.VERSION = version;\n\nexport default touchOverlay;\n"],"names":["handleClick","onPlayerReady","eventsInitialize","createOverlay","handleLockClick","handleTap","createButton","isDoubleTap","mergeOptions","touchOverlay"],"mappings":";AAAA;AAGA,SAAS,WAAW;AAClB,aAAW,OAAO,UAAU,SAAU,QAAQ;AAC5C,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,UAAI,SAAS,UAAU,CAAC;AAExB,eAAS,OAAO,QAAQ;AACtB,YAAI,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG,GAAG;AACrD,iBAAO,GAAG,IAAI,OAAO,GAAG;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,SAAO,SAAS,MAAM,MAAM,SAAS;AACvC;AAEA,IAAI,UAAU;AAEd,IAAI;AACJ,IAAI,WAAW;AAEf,IAAI,WAAW;AAAA,EACb,UAAU;AAAA,IACR,aAAa,SAAS,YAAY,QAAQ;AACxC,UAAI,OAAO,OAAO,OAAO,YAAW,CAAE,IAAI;AAC1C,aAAO,YAAY,IAAI;AAAA,IACzB;AAAA,IACA,WAAW;AAAA,EACf;AAAA,EACE,MAAM;AAAA,IACJ,aAAa,SAASA,aAAY,QAAQ;AACxC,UAAI,OAAO,UAAU;AACnB,eAAO,KAAI;AAAA,MACb,OAAO;AACL,eAAO,MAAK;AAAA,MACd;AAAA,IACF;AAAA,EACJ;AAAA,EACE,WAAW;AAAA,IACT,aAAa,SAASA,aAAY,QAAQ;AACxC,UAAI,OAAO,OAAO,OAAO,YAAW,CAAE,IAAI;AAC1C,aAAO,YAAY,IAAI;AAAA,IACzB;AAAA,IACA,WAAW;AAAA,EACf;AAAA,EACE,YAAY;AACd;AACA,IAAI,iBAAiB;AAAA,EACnB,UAAU;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,EACf;AAAA,EACE,UAAU;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,EACf;AAAA,EACE,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,WAAW;AAAA,EACf;AAAA,EACE,WAAW;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO;AAAA,EACX;AAAA,EACE,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,WAAW;AAAA,EACf;AACA;AAEA,IAAI,iBAAiB,QAAQ,kBAAkB,QAAQ;AAiBvD,IAAI,gBAAgB,SAASC,eAAc,QAAQ,SAAS;AAC1D,SAAO,SAAS,mBAAmB;AACnC,MAAI,UAAU,cAAc,QAAQ,OAAO;AAC3C,SAAO,GAAE,EAAG,OAAO,OAAO;AAC1B,mBAAiB,QAAQ,OAAO;AAClC;AAEA,IAAI,mBAAmB,SAASC,kBAAiB,QAAQ,SAAS;AAChE,MAAI,aAAa,QAAQ,cAAc,cAAc;AACrD,SAAO,GAAG,QAAQ,WAAY;AAC5B,QAAI,oBAAoB,WAAW,cAAc,8BAA8B;AAC/E,sBAAkB,YAAY;AAAA,EAChC,CAAC;AACD,SAAO,GAAG,SAAS,WAAY;AAC7B,QAAI,oBAAoB,WAAW,cAAc,8BAA8B;AAC/E,sBAAkB,YAAY;AAAA,EAChC,CAAC;AACD,SAAO,GAAG,gBAAgB,WAAY;AACpC,YAAQ,UAAU,IAAI,QAAQ;AAC9B,eAAW,UAAU,IAAI,QAAQ;AAAA,EACnC,CAAC;AACD,SAAO,GAAG,cAAc,WAAY;AAClC,YAAQ,UAAU,OAAO,QAAQ;AACjC,eAAW,UAAU,OAAO,QAAQ;AAAA,EACtC,CAAC;AACD,UAAQ,iBAAiB,SAAS,SAAU,GAAG;AAC7C,QAAI,YAAY,OAAO,GAAE;AACzB,QAAI,CAAC,UAAW;AAChB,QAAI,aAAa,UAAU,cAAc,kBAAkB;AAE3D,QAAI,EAAE,OAAO,UAAU,SAAS,MAAM,GAAG;AACvC;AAAA,IACF;AAEA,QAAI,CAAC,WAAW,UAAU,SAAS,QAAQ,GAAG;AAC5C,iBAAW,UAAU,IAAI,QAAQ;AACjC,iBAAW,UAAU,IAAI,QAAQ;AAAA,IACnC,OAAO;AACL,iBAAW,UAAU,OAAO,QAAQ;AAEpC,UAAI,CAAC,UAAU;AACb,mBAAW,UAAU,OAAO,QAAQ;AAAA,MACtC;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAEA,IAAI,gBAAgB,SAASC,eAAc,QAAQ,SAAS;AAC1D,MAAI,CAAC,WAAW,CAAC,OAAO,KAAK,OAAO,EAAE,QAAQ;AAC5C,cAAU,SAAS,CAAA,GAAI,QAAQ;AAAA,EACjC,OAAO;AACL,cAAU,aAAa,SAAS,QAAQ;AAAA,EAC1C;AAEA,MAAI,cAAc,SAAS,cAAc,KAAK;AAC9C,MAAI,MAAM,SAAS,cAAc,KAAK;AACtC,MAAI,iBAAiB,SAAS,cAAc,KAAK;AACjD,iBAAe,YAAY;AAC3B,MAAI,YAAY;AAChB,cAAY,YAAY;AAExB,MAAI,UAAU,OAAO,KAAK,OAAO,EAAE,OAAO,SAAU,QAAQ;AAC1D,WAAO,eAAe,eAAe,MAAM;AAAA,EAC7C,CAAC;AACD,MAAI,UAAU,QAAQ,IAAI,SAAU,QAAQ;AAC1C,QAAI,mBAAmB,eAAe,MAAM;AAC5C,QAAI,UAAU,aAAa,gBAAgB;AAC3C,WAAO;AAAA,MACL,SAAS,QAAQ,MAAM;AAAA,MACvB;AAAA,IACN;AAAA,EACE,CAAC;AACD,EAAAH,aAAY,SAAS,MAAM;AAC3B,YAAU,SAAS,MAAM;AAEzB,MAAI,QAAQ,YAAY;AACtB,QAAI,cAAc,SAAS,cAAc,KAAK;AAC9C,gBAAY,YAAY;AACxB,mBAAe,UAAU,OAAO,kBAAkB,SAAS;AAC3D,mBAAe,UAAU,IAAI,gBAAgB;AAC7C,QAAI,uBAAuB;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,MAAM;AAAA,IACZ;AACI,QAAI,aAAa,aAAa,oBAAoB;AAClD,oBAAgB,YAAY,MAAM;AAClC,gBAAY,OAAO,UAAU;AAC7B,QAAI,OAAO,WAAW;AAAA,EACxB;AAEA,UAAQ,QAAQ,SAAU,QAAQ;AAChC,WAAO,eAAe,OAAO,OAAO,OAAO;AAAA,EAC7C,CAAC;AACD,MAAI,OAAO,cAAc;AACzB,cAAY,OAAO,GAAG;AACtB,SAAO;AACT;AAEA,IAAI,kBAAkB,SAASI,iBAAgB,SAAS,QAAQ;AAC9D,MAAI,oBAAoB,QAAQ,UAC5B,iBAAiB,kBAAkB,CAAC;AACxC,iBAAe,iBAAiB,SAAS,WAAY;AACnD,QAAI,YAAY,OAAO,GAAE;AACzB,QAAI,CAAC,UAAW;AAChB,QAAI,aAAa,UAAU,cAAc,kBAAkB;AAC3D,QAAI,wBAAwB,MAAM,KAAK,UAAU,iBAAiB,mCAAmC,CAAC;AAEtG,QAAI,UAAU;AACZ,qBAAe,YAAY;AAC3B,4BAAsB,QAAQ,SAAU,KAAK;AAC3C,YAAI,UAAU,OAAO,QAAQ;AAAA,MAC/B,CAAC;AACD,iBAAW,UAAU,OAAO,QAAQ;AACpC,iBAAW;AACX;AAAA,IACF;AAEA,mBAAe,YAAY;AAC3B,0BAAsB,QAAQ,SAAU,KAAK;AAC3C,UAAI,UAAU,IAAI,QAAQ;AAAA,IAC5B,CAAC;AACD,eAAW,UAAU,IAAI,QAAQ;AACjC,eAAW;AAAA,EACb,CAAC;AACH;AAEA,IAAI,YAAY,SAASC,WAAU,SAAS,QAAQ;AAClD,YAAU,QAAQ,OAAO,SAAU,QAAQ;AACzC,WAAO,OAAO,QAAQ,aAAa,OAAO,QAAQ;AAAA,EACpD,CAAC;AACD,UAAQ,QAAQ,SAAU,QAAQ;AAChC,WAAO,QAAQ,iBAAiB,SAAS,WAAY;AACnD,kBAAY,WAAY;AACtB,eAAO,QAAQ,YAAY,MAAM;AAAA,MACnC,CAAC;AAAA,IACH,CAAC;AAAA,EACH,CAAC;AACH;AAEA,IAAIL,eAAc,SAASA,aAAY,SAAS,QAAQ;AACtD,YAAU,QAAQ,OAAO,SAAU,KAAK;AACtC,WAAO,IAAI,QAAQ;AAAA,EACrB,CAAC;AACD,UAAQ,QAAQ,SAAU,QAAQ;AAChC,QAAI,wBAAwB,OAAO,QAAQ,UACvC,iBAAiB,sBAAsB,CAAC;AAC5C,mBAAe,iBAAiB,SAAS,WAAY;AACnD,aAAO,OAAO,QAAQ,YAAY,MAAM;AAAA,IAC1C,CAAC;AAAA,EACH,CAAC;AACH;AAEA,IAAI,eAAe,SAASM,cAAa,MAAM;AAC7C,MAAI,OAAO,KAAK,MACZ,aAAa,KAAK,OAClB,QAAQ,eAAe,SAAS,KAAK,YACrC,iBAAiB,KAAK,WACtB,YAAY,mBAAmB,SAAS,KAAK,gBAC7C,YAAY,KAAK,MACjB,OAAO,cAAc,SAAS,OAAO;AACzC,MAAI,SAAS,SAAS,cAAc,GAAG;AACvC,SAAO,YAAY,gBAAgB,OAAO,SAAS,OAAO,MAAM;AAChE,MAAI,UAAU,SAAS,cAAc,KAAK;AAC1C,UAAQ,YAAY;AACpB,UAAQ,OAAO,MAAM;AACrB,MAAI,SAAS,SAAS,cAAc,KAAK;AACzC,SAAO,YAAY,+BAA+B;AAClD,SAAO,OAAO,OAAO;AACrB,SAAO;AACT;AAEA,IAAI,cAAc,SAASC,aAAY,UAAU;AAC/C,MAAI,OAAM,oBAAI,KAAI,GAAG,QAAO;AAC5B,MAAI,YAAY,MAAM;AAEtB,MAAI,YAAY,OAAO,YAAY,GAAG;AACpC,aAAQ;AAAA,EACV;AAEA,eAAY,oBAAI,KAAI,GAAG,QAAO;AAChC;AAEA,IAAI,eAAe,SAASC,cAAa,cAAc,aAAa;AAClE,WAAS,OAAO,cAAc;AAC5B,QAAI,aAAa,aAAa,GAAG;AACjC,QAAI,gBAAgB,YAAY,GAAG;AAEnC,QAAI,CAAC,eAAe;AAClB;AAAA,IACF;AAEA,aAAS,UAAU,eAAe;AAChC,UAAI,CAAC,WAAW,eAAe,MAAM,KAAK,cAAc,eAAe,MAAM,GAAG;AAC9E,mBAAW,MAAM,IAAI,cAAc,MAAM;AAAA,MAC3C;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAeG,IAAC,eAAe,SAASC,cAAa,SAAS;AAChD,MAAI,QAAQ;AAGZ,OAAK,MAAM,WAAY;AACrB,kBAAc,OAAO,OAAO;AAAA,EAC9B,CAAC;AACH;AAGA,eAAe,gBAAgB,YAAY;AAE3C,aAAa,UAAU;","x_google_ignoreList":[0]}